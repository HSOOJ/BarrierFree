{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ssafy\\\\ssafy-6-\\uACF5\\uD1B5\\\\S06P12A504\\\\frontend\\\\src\\\\components\\\\recommend\\\\Recommend.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport Physical from '../images/Physical.png';\nimport Auditory from '../images/Auditory.png';\nimport Pregnant from '../images/Pregnant.png';\nimport Senior from '../images/Senior.png';\nimport Visual from '../images/Visual.png';\nimport { Button, FormControl, InputLabel, MenuItem, Select } from '@mui/material';\nimport axios from 'axios';\nimport RecommendCardList from './RecommendCardList.js';\nimport { Container, Box } from '@material-ui/core';\nimport RecommendCategories from './RecommendCategories';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { findLocation } from '../../_actions/find_actions';\nimport './Recommend.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Recommend = () => {\n  _s();\n\n  const myuser = useSelector(state => state.user.userData); // console.log(myuser)\n\n  const dispatch = useDispatch();\n  const [itemList, setItemList] = useState([]);\n  const [category, setCategory] = useState('all');\n  const onSelect = useCallback(category => (setCategory(category), console.log(category)), []); // 시도 설정\n\n  const [cityList, setCityList] = useState([]);\n  const [townList, setTownList] = useState([]);\n  const [city, setCity] = useState('');\n  const [town, setTown] = useState('');\n  const [barrier, setBarrier] = useState('');\n  useEffect(() => {\n    findMyLocation();\n    setCityDropdown();\n  }, []); // 내 위치 받아오기\n\n  const findMyLocation = () => {\n    // Geolocation API에 액세스할 수 있는지를 확인\n    if (navigator.geolocation) {\n      //위치 정보를 얻기\n      navigator.geolocation.getCurrentPosition(function (res) {\n        axios({\n          method: 'GET',\n          url: 'recommend/myloc',\n          params: {\n            lat: res.coords.latitude,\n            // 위도\n            lng: res.coords.longitude,\n            // 경도\n            radius: 20000,\n            userSeq: myuser.userSeq\n          }\n        }).then(function (res) {\n          setItemList(res.data);\n        });\n      });\n    } else {\n      alert('이 브라우저에서는 Geolocation이 지원되지 않습니다.');\n    }\n  }; // 여행 지역 선택하기\n\n\n  const setCityDropdown = () => {\n    axios({\n      method: 'GET',\n      url: 'recommend/sido'\n    }).then(function (res) {\n      setCityList(res.data);\n    });\n  };\n\n  const handleChangeCity = event => {\n    if (town) {\n      setTown('');\n    }\n\n    console.log(event);\n\n    if (event.target.value != 8) {\n      setCity(event.target.value);\n      selectTown(event.target.value);\n    } else {\n      setTownList([]);\n    }\n  };\n\n  const selectTown = sidoCode => {\n    axios({\n      url: 'recommend/sigungu',\n      method: 'GET',\n      params: {\n        sidoCode: sidoCode\n      }\n    }).then(function (res) {\n      console.log(res);\n      setTownList(res.data);\n    });\n  };\n\n  const handleChangeTown = event => {\n    setTown(event.target.value);\n  }; // 장애 정보 선택하기\n\n\n  const onClickBarrier = res => {\n    // console.log(res.target.id)\n    if (res.target.id === 'physical') {\n      setBarrier(1);\n    } else if (res.target.id === 'visual') {\n      setBarrier(2);\n    } else if (res.target.id === 'auditory') {\n      setBarrier(3);\n    } else if (res.target.id === 'pregnant') {\n      setBarrier(4);\n    } else if (res.target.id === 'senior') {\n      setBarrier(5);\n    }\n  }; // !!!!!!!!!!!!! 검색 기능 만들기\n\n\n  const onClickSearch = () => {\n    // city와 town만 있을 때\n    if (city, town) {\n      let data = {\n        sidoCode: city,\n        sigunguCode: town,\n        userSeq: myuser.userSeq\n      };\n      dispatch(findLocation(data));\n      setCity('');\n      setTown('');\n    } else if (barrier) {\n      let data = {\n        contentTypeId: barrier,\n        userSeq: myuser.userSeq\n      };\n      dispatch(findLocation(data));\n      setBarrier('');\n    } else if (city, town, barrier) {\n      let data = {\n        contentTypeId: barrier,\n        sidoCode: city,\n        sigunguCode: town,\n        userSeq: myuser.userSeq\n      };\n      dispatch(findLocation(data));\n      setCity('');\n      setTown('');\n      setBarrier('');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uB0B4 \\uC8FC\\uBCC0 \\uBB34\\uC7A5\\uC560 \\uC5EC\\uD589\\uC9C0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"selete-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uBB34\\uC7A5\\uC560 \\uC120\\uD0DD\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"physical\",\n            onClick: onClickBarrier,\n            src: Physical\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"visual\",\n            onClick: onClickBarrier,\n            src: Visual\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"auditory\",\n            onClick: onClickBarrier,\n            src: Auditory\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"pregnant\",\n            onClick: onClickBarrier,\n            src: Pregnant\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"senior\",\n            onClick: onClickBarrier,\n            src: Senior\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uBB34\\uC7A5\\uC560 \\uC5EC\\uD589\\uC9C0\\uC5ED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          sx: {\n            m: 1,\n            minWidth: 120\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            id: \"find-city\",\n            children: \"\\uC2DC\\uB3C4 \\uAC80\\uC0C9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            labelId: \"find-city\",\n            id: \"find-city\",\n            value: city,\n            onChange: handleChangeCity,\n            label: \"\\uC2DC\\uB3C4\",\n            children: cityList.map(city => /*#__PURE__*/_jsxDEV(MenuItem, {\n              name: city.name,\n              value: city.code,\n              children: city.name\n            }, city.rnum, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          sx: {\n            m: 1,\n            minWidth: 120\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            id: \"find-town\",\n            children: \"\\uC2DC\\uAD6C\\uAD70 \\uAC80\\uC0C9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            labelId: \"find-town\",\n            id: \"find-town\",\n            value: town,\n            onChange: handleChangeTown,\n            label: \"\\uC2DC\\uB3C4\",\n            children: townList.map(town => /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: town.code,\n              children: town.name\n            }, town.rnum, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"button-list\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            id: \"search\",\n            onClick: onClickSearch,\n            children: \"\\uAC80\\uC0C9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            id: \"reset\",\n            children: \"\\uCD08\\uAE30\\uD654\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RecommendCategories, {\n        category: category,\n        onClick: onSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RecommendCardList, {\n        itemList: itemList,\n        category: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Recommend, \"f9CxNRhxcLTlNwqHCdQeedyJwg4=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Recommend;\nexport default Recommend;\n\nvar _c;\n\n$RefreshReg$(_c, \"Recommend\");","map":{"version":3,"sources":["C:/Users/ssafy/ssafy-6-공통/S06P12A504/frontend/src/components/recommend/Recommend.js"],"names":["React","useEffect","useState","useCallback","Physical","Auditory","Pregnant","Senior","Visual","Button","FormControl","InputLabel","MenuItem","Select","axios","RecommendCardList","Container","Box","RecommendCategories","useDispatch","useSelector","findLocation","Recommend","myuser","state","user","userData","dispatch","itemList","setItemList","category","setCategory","onSelect","console","log","cityList","setCityList","townList","setTownList","city","setCity","town","setTown","barrier","setBarrier","findMyLocation","setCityDropdown","navigator","geolocation","getCurrentPosition","res","method","url","params","lat","coords","latitude","lng","longitude","radius","userSeq","then","data","alert","handleChangeCity","event","target","value","selectTown","sidoCode","handleChangeTown","onClickBarrier","id","onClickSearch","sigunguCode","contentTypeId","m","minWidth","map","name","code","rnum"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport Physical from '../images/Physical.png';\r\nimport Auditory from '../images/Auditory.png';\r\nimport Pregnant from '../images/Pregnant.png';\r\nimport Senior from '../images/Senior.png';\r\nimport Visual from '../images/Visual.png';\r\nimport {\r\n  Button,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\nimport RecommendCardList from './RecommendCardList.js';\r\nimport { Container, Box } from '@material-ui/core';\r\nimport RecommendCategories from './RecommendCategories';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { findLocation } from '../../_actions/find_actions';\r\nimport './Recommend.css';\r\n\r\nconst Recommend = () => {\r\n  const myuser = useSelector((state) => state.user.userData);\r\n  // console.log(myuser)\r\n  const dispatch = useDispatch();\r\n  const [itemList, setItemList] = useState([]);\r\n  const [category, setCategory] = useState('all');\r\n  const onSelect = useCallback(\r\n    (category) => (setCategory(category), console.log(category)),\r\n    [],\r\n  );\r\n\r\n  // 시도 설정\r\n  const [cityList, setCityList] = useState([]);\r\n  const [townList, setTownList] = useState([]);\r\n  const [city, setCity] = useState('');\r\n  const [town, setTown] = useState('');\r\n  const [barrier, setBarrier] = useState('');\r\n\r\n  useEffect(() => {\r\n    findMyLocation();\r\n    setCityDropdown();\r\n  }, []);\r\n\r\n  // 내 위치 받아오기\r\n  const findMyLocation = () => {\r\n    // Geolocation API에 액세스할 수 있는지를 확인\r\n    if (navigator.geolocation) {\r\n      //위치 정보를 얻기\r\n      navigator.geolocation.getCurrentPosition(function (res) {\r\n        axios({\r\n          method: 'GET',\r\n          url: 'recommend/myloc',\r\n          params: {\r\n            lat: res.coords.latitude, // 위도\r\n            lng: res.coords.longitude, // 경도\r\n            radius: 20000,\r\n            userSeq: myuser.userSeq,\r\n          },\r\n        }).then(function (res) {\r\n          setItemList(res.data);\r\n        });\r\n      });\r\n    } else {\r\n      alert('이 브라우저에서는 Geolocation이 지원되지 않습니다.');\r\n    }\r\n  };\r\n\r\n  // 여행 지역 선택하기\r\n  const setCityDropdown = () => {\r\n    axios({\r\n      method: 'GET',\r\n      url: 'recommend/sido',\r\n    }).then(function (res) {\r\n      setCityList(res.data);\r\n    });\r\n  };\r\n\r\n  const handleChangeCity = (event) => {\r\n    if (town) {\r\n      setTown('');\r\n    }\r\n    console.log(event);\r\n    if (event.target.value != 8) {\r\n      setCity(event.target.value);\r\n      selectTown(event.target.value);\r\n    } else {\r\n      setTownList([]);\r\n    }\r\n  };\r\n\r\n  const selectTown = (sidoCode) => {\r\n    axios({\r\n      url: 'recommend/sigungu',\r\n      method: 'GET',\r\n      params: {\r\n        sidoCode: sidoCode,\r\n      },\r\n    }).then(function (res) {\r\n      console.log(res);\r\n      setTownList(res.data);\r\n    });\r\n  };\r\n\r\n  const handleChangeTown = (event) => {\r\n    setTown(event.target.value);\r\n  };\r\n\r\n  // 장애 정보 선택하기\r\n  const onClickBarrier = (res) => {\r\n    // console.log(res.target.id)\r\n    if (res.target.id === 'physical') {\r\n      setBarrier(1);\r\n    } else if (res.target.id === 'visual') {\r\n      setBarrier(2);\r\n    } else if (res.target.id === 'auditory') {\r\n      setBarrier(3);\r\n    } else if (res.target.id === 'pregnant') {\r\n      setBarrier(4);\r\n    } else if (res.target.id === 'senior') {\r\n      setBarrier(5);\r\n    }\r\n  };\r\n\r\n  // !!!!!!!!!!!!! 검색 기능 만들기\r\n  const onClickSearch = () => {\r\n    // city와 town만 있을 때\r\n    if ((city, town)) {\r\n      let data = {\r\n        sidoCode: city,\r\n        sigunguCode: town,\r\n        userSeq: myuser.userSeq,\r\n      };\r\n      dispatch(findLocation(data));\r\n      setCity('');\r\n      setTown('');\r\n    } else if (barrier) {\r\n      let data = {\r\n        contentTypeId: barrier,\r\n        userSeq: myuser.userSeq,\r\n      };\r\n      dispatch(findLocation(data));\r\n      setBarrier('');\r\n    } else if ((city, town, barrier)) {\r\n      let data = {\r\n        contentTypeId: barrier,\r\n        sidoCode: city,\r\n        sigunguCode: town,\r\n        userSeq: myuser.userSeq,\r\n      };\r\n      dispatch(findLocation(data));\r\n      setCity('');\r\n      setTown('');\r\n      setBarrier('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Container maxWidth=\"md\">\r\n        <h2>내 주변 무장애 여행지</h2>\r\n        <div class=\"selete-box\">\r\n          <h3>무장애 선택하기</h3>\r\n          <div>\r\n            <img id=\"physical\" onClick={onClickBarrier} src={Physical}></img>\r\n            <img id=\"visual\" onClick={onClickBarrier} src={Visual}></img>\r\n            <img id=\"auditory\" onClick={onClickBarrier} src={Auditory}></img>\r\n            <img id=\"pregnant\" onClick={onClickBarrier} src={Pregnant}></img>\r\n            <img id=\"senior\" onClick={onClickBarrier} src={Senior}></img>\r\n          </div>\r\n          <h3>무장애 여행지역</h3>\r\n          <FormControl variant=\"standard\" sx={{ m: 1, minWidth: 120 }}>\r\n            <InputLabel id=\"find-city\">시도 검색</InputLabel>\r\n            <Select\r\n              labelId=\"find-city\"\r\n              id=\"find-city\"\r\n              value={city}\r\n              onChange={handleChangeCity}\r\n              label=\"시도\"\r\n            >\r\n              {cityList.map((city) => (\r\n                <MenuItem name={city.name} value={city.code} key={city.rnum}>\r\n                  {city.name}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl variant=\"standard\" sx={{ m: 1, minWidth: 120 }}>\r\n            <InputLabel id=\"find-town\">시구군 검색</InputLabel>\r\n            <Select\r\n              labelId=\"find-town\"\r\n              id=\"find-town\"\r\n              value={town}\r\n              onChange={handleChangeTown}\r\n              label=\"시도\"\r\n            >\r\n              {townList.map((town) => (\r\n                <MenuItem value={town.code} key={town.rnum}>\r\n                  {town.name}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <div class=\"button-list\">\r\n            <Button variant=\"contained\" id=\"search\" onClick={onClickSearch}>\r\n              검색\r\n            </Button>\r\n            <Button variant=\"contained\" id=\"reset\">\r\n              초기화\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <RecommendCategories\r\n          category={category}\r\n          onClick={onSelect}\r\n        ></RecommendCategories>\r\n        <RecommendCardList\r\n          itemList={itemList}\r\n          category={category}\r\n        ></RecommendCardList>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Recommend;\r\n"]},"metadata":{},"sourceType":"module"}