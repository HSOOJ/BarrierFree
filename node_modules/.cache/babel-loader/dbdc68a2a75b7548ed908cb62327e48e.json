{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ssafy\\\\ssafy-6-\\uACF5\\uD1B5\\\\S06P12A504\\\\frontend\\\\src\\\\components\\\\recommend\\\\Recommend.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport Physical from '../images/Physical.png';\nimport Auditory from '../images/Auditory.png';\nimport Pregnant from '../images/Pregnant.png';\nimport Senior from '../images/Senior.png';\nimport Visual from '../images/Visual.png';\nimport { Button, FormControl, InputLabel, MenuItem, Select } from '@mui/material';\nimport axios from 'axios';\nimport RecommendCardList from './RecommendCardList.js';\nimport { Container, Box } from '@material-ui/core';\nimport RecommendCategories from './RecommendCategories';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { findLocation } from '../../_actions/find_actions';\nimport './Recommend.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Recommend = () => {\n  _s();\n\n  const myuser = useSelector(state => state.user.userData); // console.log(myuser)\n\n  const dispatch = useDispatch();\n  const [itemList, setItemList] = useState([]);\n  var arrayLength = 3;\n  var multiArray = new Array(arrayLength);\n  const [result, setResult] = useState([]);\n  const [category, setCategory] = useState('all');\n  const onSelect = useCallback(category => (setCategory(category), console.log(category)), []); // 시도 설정\n\n  const [cityList, setCityList] = useState([]);\n  const [townList, setTownList] = useState([]);\n  const [city, setCity] = useState('');\n  const [town, setTown] = useState('');\n  const [barrier, setBarrier] = useState('');\n  useEffect(() => {\n    findMyLocation();\n    setCityDropdown();\n  }, []); // 내 위치 받아오기\n\n  const findMyLocation = () => {\n    // Geolocation API에 액세스할 수 있는지를 확인\n    if (navigator.geolocation) {\n      //위치 정보를 얻기\n      navigator.geolocation.getCurrentPosition(function (res) {\n        axios({\n          method: 'GET',\n          url: '/recommend/myloc',\n          params: {\n            contentTypeId: 12,\n            lat: res.coords.latitude,\n            // 위도\n            lng: res.coords.longitude,\n            // 경도\n            radius: 1000,\n            userSeq: myuser.userSeq,\n            page: 1,\n            size: 100\n          }\n        }).then(function (res) {\n          setItemList(res.data);\n        });\n      });\n    } else {\n      alert('이 브라우저에서는 Geolocation이 지원되지 않습니다.');\n    }\n  }; // 여행 지역 선택하기\n\n\n  const setCityDropdown = () => {\n    axios({\n      method: 'GET',\n      url: 'recommend/sido'\n    }).then(function (res) {\n      console.log(res);\n      setCityList(res.data);\n    });\n  };\n\n  const handleChangeCity = event => {\n    if (town) {\n      setTown('');\n    }\n\n    setCity(event.target.value);\n    selectTown(event.target.value);\n  };\n\n  const selectTown = sidoCode => {\n    axios({\n      url: 'recommend/sigungu',\n      method: 'GET',\n      params: {\n        sidoCode: sidoCode\n      }\n    }).then(function (res) {\n      setTownList(res.data);\n    });\n  };\n\n  const handleChangeTown = event => {\n    console.log(event);\n    setTown(event.target.value);\n  }; // 장애 정보 선택하기\n\n\n  const onClickBarrier = res => {\n    console.log(res.target.id);\n    setBarrier(res.target.id);\n  };\n\n  const onClickSearch = () => {\n    const cityNum = Number(city);\n    const townNum = Number(town); // let data = {\n    //   sidoCode: city,\n    //   sigunguCode: town,\n    //   userSeq: myuser.userSeq,\n    //   // contentTypeId: impairmentNums[i],\n    //   impairments: barrier,\n    //   page: 0,\n    //   size: 10\n    //   }\n    // axios(\n    //   {\n    //     method: \"GET\",\n    //     url: '/recommend/search',\n    //     params: data\n    //   }).then((res) => {\n    //     console.log(res)\n    //     setItemList(res.data)})\n    //   .catch('hey')\n    // setCity('');\n    // setTown('');\n    // setBarrier('');\n    // const impairmentNums = [12, 39, 32, 15];\n    // for (var i = 0; i < impairmentNums.length; i++)\n\n    if (city && town && barrier) {\n      let data = {\n        sidoCode: cityNum,\n        sigunguCode: townNum,\n        userSeq: myuser.userSeq,\n        // contentTypeId: impairmentNums[i],\n        impairments: barrier,\n        page: 0,\n        size: 10\n      };\n      axios({\n        method: 'GET',\n        url: '/recommend/search',\n        params: data\n      }).then(res => {\n        console.log(res);\n        setItemList(res.data);\n      }).catch('hey');\n      setCity('');\n      setTown('');\n      setBarrier('');\n    } else if (barrier) {\n      let data = {\n        // sidoCode: cityNum,\n        // sigunguCode: townNum,\n        userSeq: myuser.userSeq,\n        contentTypeId: 12,\n        impairments: barrier,\n        page: 0,\n        size: 10\n      };\n      axios({\n        method: 'GET',\n        url: '/recommend/search',\n        params: data\n      }).then(res => {\n        console.log(res);\n        setItemList(res.data);\n      });\n      setCity('');\n      setTown('');\n      setBarrier('');\n    } else if (city, town) {\n      let data = {\n        sidoCode: cityNum,\n        sigunguCode: townNum,\n        userSeq: myuser.userSeq,\n        contentTypeId: 12,\n        // impairments: barrier,\n        page: 0,\n        size: 10\n      };\n      axios({\n        method: 'GET',\n        url: '/recommend/search',\n        params: data\n      }).then(res => {\n        console.log(res);\n        setItemList(res.data);\n      }).catch('hey');\n      setCity('');\n      setTown('');\n      setBarrier('');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uB0B4 \\uC8FC\\uBCC0 \\uBB34\\uC7A5\\uC560 \\uC5EC\\uD589\\uC9C0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"selete-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uBB34\\uC7A5\\uC560 \\uC120\\uD0DD\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"physical\",\n            onClick: onClickBarrier,\n            src: Physical\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"visibility\",\n            onClick: onClickBarrier,\n            src: Visual\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"deaf\",\n            onClick: onClickBarrier,\n            src: Auditory\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"infant\",\n            onClick: onClickBarrier,\n            src: Pregnant\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"senior\",\n            onClick: onClickBarrier,\n            src: Senior\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uBB34\\uC7A5\\uC560 \\uC5EC\\uD589\\uC9C0\\uC5ED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          sx: {\n            m: 1,\n            minWidth: 120\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            id: \"find-city\",\n            children: \"\\uC2DC\\uB3C4 \\uAC80\\uC0C9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            labelId: \"find-city\",\n            id: \"find-city\",\n            value: city,\n            onChange: handleChangeCity,\n            label: \"\\uC2DC\\uB3C4\",\n            children: cityList.map(city => /*#__PURE__*/_jsxDEV(MenuItem, {\n              name: city.name,\n              value: city.code,\n              children: city.name\n            }, city.code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          variant: \"standard\",\n          sx: {\n            m: 1,\n            minWidth: 120\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            id: \"find-town\",\n            children: \"\\uC2DC\\uAD6C\\uAD70 \\uAC80\\uC0C9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            labelId: \"find-town\",\n            id: \"find-town\",\n            value: town,\n            onChange: handleChangeTown,\n            label: \"\\uC2DC\\uB3C4\",\n            children: townList.map(town => /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: town.code,\n              children: town.name\n            }, town.rnum, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"button-list\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            id: \"search\",\n            onClick: onClickSearch,\n            children: \"\\uAC80\\uC0C9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            id: \"reset\",\n            children: \"\\uCD08\\uAE30\\uD654\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RecommendCategories, {\n        category: category,\n        onClick: onSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RecommendCardList, {\n        itemList: itemList,\n        category: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Recommend, \"yOT5WjW8U787gcD9T4bSOysbE5M=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Recommend;\nexport default Recommend;\n\nvar _c;\n\n$RefreshReg$(_c, \"Recommend\");","map":{"version":3,"sources":["C:/Users/ssafy/ssafy-6-공통/S06P12A504/frontend/src/components/recommend/Recommend.js"],"names":["React","useEffect","useState","useCallback","Physical","Auditory","Pregnant","Senior","Visual","Button","FormControl","InputLabel","MenuItem","Select","axios","RecommendCardList","Container","Box","RecommendCategories","useDispatch","useSelector","findLocation","Recommend","myuser","state","user","userData","dispatch","itemList","setItemList","arrayLength","multiArray","Array","result","setResult","category","setCategory","onSelect","console","log","cityList","setCityList","townList","setTownList","city","setCity","town","setTown","barrier","setBarrier","findMyLocation","setCityDropdown","navigator","geolocation","getCurrentPosition","res","method","url","params","contentTypeId","lat","coords","latitude","lng","longitude","radius","userSeq","page","size","then","data","alert","handleChangeCity","event","target","value","selectTown","sidoCode","handleChangeTown","onClickBarrier","id","onClickSearch","cityNum","Number","townNum","sigunguCode","impairments","catch","m","minWidth","map","name","code","rnum"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport Physical from '../images/Physical.png';\r\nimport Auditory from '../images/Auditory.png';\r\nimport Pregnant from '../images/Pregnant.png';\r\nimport Senior from '../images/Senior.png';\r\nimport Visual from '../images/Visual.png';\r\nimport {\r\n  Button,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\nimport RecommendCardList from './RecommendCardList.js';\r\nimport { Container, Box } from '@material-ui/core';\r\nimport RecommendCategories from './RecommendCategories';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { findLocation } from '../../_actions/find_actions';\r\nimport './Recommend.css';\r\nconst Recommend = () => {\r\n  const myuser = useSelector((state) => state.user.userData);\r\n  // console.log(myuser)\r\n  const dispatch = useDispatch();\r\n  const [itemList, setItemList] = useState([]);\r\n  var arrayLength = 3;\r\n  var multiArray = new Array(arrayLength);\r\n  const [result, setResult] = useState([]);\r\n  const [category, setCategory] = useState('all');\r\n  const onSelect = useCallback(\r\n    (category) => (setCategory(category), console.log(category)),\r\n    [],\r\n  );\r\n\r\n  // 시도 설정\r\n  const [cityList, setCityList] = useState([]);\r\n  const [townList, setTownList] = useState([]);\r\n  const [city, setCity] = useState('');\r\n  const [town, setTown] = useState('');\r\n  const [barrier, setBarrier] = useState('');\r\n\r\n  useEffect(() => {\r\n    findMyLocation();\r\n    setCityDropdown();\r\n  }, []);\r\n\r\n  // 내 위치 받아오기\r\n  const findMyLocation = () => {\r\n    // Geolocation API에 액세스할 수 있는지를 확인\r\n    if (navigator.geolocation) {\r\n      //위치 정보를 얻기\r\n      navigator.geolocation.getCurrentPosition(function (res) {\r\n        axios({\r\n          method: 'GET',\r\n          url: '/recommend/myloc',\r\n          params: {\r\n            contentTypeId: 12,\r\n            lat: res.coords.latitude, // 위도\r\n            lng: res.coords.longitude, // 경도\r\n            radius: 1000,\r\n            userSeq: myuser.userSeq,\r\n            page: 1,\r\n            size: 100,\r\n          },\r\n        }).then(function (res) {\r\n          setItemList(res.data);\r\n        });\r\n      });\r\n    } else {\r\n      alert('이 브라우저에서는 Geolocation이 지원되지 않습니다.');\r\n    }\r\n  };\r\n\r\n  // 여행 지역 선택하기\r\n  const setCityDropdown = () => {\r\n    axios({\r\n      method: 'GET',\r\n      url: 'recommend/sido',\r\n    }).then(function (res) {\r\n      console.log(res);\r\n      setCityList(res.data);\r\n    });\r\n  };\r\n\r\n  const handleChangeCity = (event) => {\r\n    if (town) {\r\n      setTown('');\r\n    }\r\n    setCity(event.target.value);\r\n    selectTown(event.target.value);\r\n  };\r\n\r\n  const selectTown = (sidoCode) => {\r\n    axios({\r\n      url: 'recommend/sigungu',\r\n      method: 'GET',\r\n      params: {\r\n        sidoCode: sidoCode,\r\n      },\r\n    }).then(function (res) {\r\n      setTownList(res.data);\r\n    });\r\n  };\r\n\r\n  const handleChangeTown = (event) => {\r\n    console.log(event);\r\n    setTown(event.target.value);\r\n  };\r\n\r\n  // 장애 정보 선택하기\r\n  const onClickBarrier = (res) => {\r\n    console.log(res.target.id);\r\n    setBarrier(res.target.id);\r\n  };\r\n\r\n  const onClickSearch = () => {\r\n    const cityNum = Number(city);\r\n    const townNum = Number(town);\r\n    // let data = {\r\n    //   sidoCode: city,\r\n    //   sigunguCode: town,\r\n    //   userSeq: myuser.userSeq,\r\n    //   // contentTypeId: impairmentNums[i],\r\n    //   impairments: barrier,\r\n    //   page: 0,\r\n    //   size: 10\r\n    //   }\r\n    // axios(\r\n    //   {\r\n    //     method: \"GET\",\r\n    //     url: '/recommend/search',\r\n    //     params: data\r\n    //   }).then((res) => {\r\n    //     console.log(res)\r\n    //     setItemList(res.data)})\r\n    //   .catch('hey')\r\n    // setCity('');\r\n    // setTown('');\r\n    // setBarrier('');\r\n    // const impairmentNums = [12, 39, 32, 15];\r\n    // for (var i = 0; i < impairmentNums.length; i++)\r\n\r\n    if (city && town && barrier) {\r\n      let data = {\r\n        sidoCode: cityNum,\r\n        sigunguCode: townNum,\r\n        userSeq: myuser.userSeq,\r\n        // contentTypeId: impairmentNums[i],\r\n        impairments: barrier,\r\n        page: 0,\r\n        size: 10,\r\n      };\r\n      axios({\r\n        method: 'GET',\r\n        url: '/recommend/search',\r\n        params: data,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          setItemList(res.data);\r\n        })\r\n        .catch('hey');\r\n\r\n      setCity('');\r\n      setTown('');\r\n      setBarrier('');\r\n    } else if (barrier) {\r\n      let data = {\r\n        // sidoCode: cityNum,\r\n        // sigunguCode: townNum,\r\n        userSeq: myuser.userSeq,\r\n        contentTypeId: 12,\r\n        impairments: barrier,\r\n        page: 0,\r\n        size: 10,\r\n      };\r\n      axios({\r\n        method: 'GET',\r\n        url: '/recommend/search',\r\n        params: data,\r\n      }).then((res) => {\r\n        console.log(res);\r\n        setItemList(res.data);\r\n      });\r\n\r\n      setCity('');\r\n      setTown('');\r\n      setBarrier('');\r\n    } else if ((city, town)) {\r\n      let data = {\r\n        sidoCode: cityNum,\r\n        sigunguCode: townNum,\r\n        userSeq: myuser.userSeq,\r\n        contentTypeId: 12,\r\n        // impairments: barrier,\r\n        page: 0,\r\n        size: 10,\r\n      };\r\n      axios({\r\n        method: 'GET',\r\n        url: '/recommend/search',\r\n        params: data,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          setItemList(res.data);\r\n        })\r\n        .catch('hey');\r\n\r\n      setCity('');\r\n      setTown('');\r\n      setBarrier('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* <Header /> */}\r\n      <Container maxWidth=\"md\">\r\n        <h2>내 주변 무장애 여행지</h2>\r\n        <div class=\"selete-box\">\r\n          <h3>무장애 선택하기</h3>\r\n          <div>\r\n            <img id=\"physical\" onClick={onClickBarrier} src={Physical}></img>\r\n            <img id=\"visibility\" onClick={onClickBarrier} src={Visual}></img>\r\n            <img id=\"deaf\" onClick={onClickBarrier} src={Auditory}></img>\r\n            <img id=\"infant\" onClick={onClickBarrier} src={Pregnant}></img>\r\n            <img id=\"senior\" onClick={onClickBarrier} src={Senior}></img>\r\n          </div>\r\n          <h3>무장애 여행지역</h3>\r\n          <FormControl variant=\"standard\" sx={{ m: 1, minWidth: 120 }}>\r\n            <InputLabel id=\"find-city\">시도 검색</InputLabel>\r\n            <Select\r\n              labelId=\"find-city\"\r\n              id=\"find-city\"\r\n              value={city}\r\n              onChange={handleChangeCity}\r\n              label=\"시도\"\r\n            >\r\n              {cityList.map((city) => (\r\n                <MenuItem name={city.name} value={city.code} key={city.code}>\r\n                  {city.name}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl variant=\"standard\" sx={{ m: 1, minWidth: 120 }}>\r\n            <InputLabel id=\"find-town\">시구군 검색</InputLabel>\r\n            <Select\r\n              labelId=\"find-town\"\r\n              id=\"find-town\"\r\n              value={town}\r\n              onChange={handleChangeTown}\r\n              label=\"시도\"\r\n            >\r\n              {townList.map((town) => (\r\n                <MenuItem value={town.code} key={town.rnum}>\r\n                  {town.name}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <div class=\"button-list\">\r\n            <Button variant=\"contained\" id=\"search\" onClick={onClickSearch}>\r\n              검색\r\n            </Button>\r\n            <Button variant=\"contained\" id=\"reset\">\r\n              초기화\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <RecommendCategories\r\n          category={category}\r\n          onClick={onSelect}\r\n        ></RecommendCategories>\r\n        <RecommendCardList\r\n          itemList={itemList}\r\n          category={category}\r\n        ></RecommendCardList>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Recommend;\r\n"]},"metadata":{},"sourceType":"module"}